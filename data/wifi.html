<!DOCTYPE html>
<html>
<head>
  <title>WiFi Configuration</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input[type=text], input[type=password] { width: 300px; padding: 8px; }
    button { margin-top: 10px; }
    #networks { margin-top: 20px; }
    .net { cursor: pointer; padding: 5px; border-bottom: 1px solid #ddd; }
    .net:hover { background-color: #f0f0f0; }
  </style>
</head>
<body>
  <h2>Configure WiFi</h2>
  <form id="wifiForm" action="/wifi" method="POST">
    <label>SSID:</label><br>
    <input type="text" id="ssid" name="ssid" required><br><br>
    <label>Password:</label><br>
    <input type="password" id="pass" name="pass"><br><br>
    <input type="submit" value="Save and Restart">
  </form>

  <h3>Available Networks</h3>
  <div id="networks">Scanning...</div>

  <script```html
  <script>
    function loadNetworks() {
      fetch('/wifiscan')
        .then(response => response.json())
        .then(networks => {
          const container = document.getElementById('networks');
          container.innerHTML = '';
          networks.forEach(net => {
            const div = document.createElement('div');
            div.className = 'net';
            div.textContent = net.ssid + ' (' + net.rssi + ' dBm)';
            div.onclick = () => {
              document.getElementById('ssid').value = net.ssid;
            };
            container.appendChild(div);
          });
          if(networks.length === 0) {
            container.textContent = 'No networks found.';
          }
        })
        .catch(() => {
          document.getElementById('networks').textContent = 'Scan failed.';
        });
    }

    window.onload = loadNetworks;
  </script>
</body>
</html>
